sudo: required
git:
  depth: 3
  submodules: false
env:
  matrix:
  - OS_TYPE=ubuntu OS_VERSION=14.04 OS_CLOUDPACKAGE=ubuntu OS_NAME=trusty
  - OS_TYPE=ubuntu OS_VERSION=16.04 OS_CLOUDPACKAGE=ubuntu OS_NAME=xenial
  - OS_TYPE=ubuntu OS_VERSION=18.04 OS_CLOUDPACKAGE=ubuntu OS_NAME=bionic
services:
- docker
language: c
compiler: gcc
addons:
  apt:
    update: true
before_install:
- sudo docker pull ${OS_TYPE}:${OS_VERSION}
script:
- mv .git ..
- cd ..
- mv binutils binutils-2.30.51
- tar -czf binutils_2.30.51.orig.tar.gz binutils-2.30.51
- cd binutils-2.30.51
- docker run -ti -v ${TRAVIS_BUILD_DIR}/..:/work:rw ${OS_TYPE}:${OS_VERSION} /bin/bash -c "cd /work/binutils-2.30.51; ./tests.sh ${OS_TYPE} ${OS_VERSION}"
- mv ../.git .
deploy:
  provider: bintray
  on: hermit
  file: ".bintray_descriptor.json"
  key:
    secure: d2i7Ex53lWxtVnmByN2ODQqSE1hwS+RR9B4Yd4ORqklTucRShkXRg8xrIUfw9uNQOD9pCYz3VOCzL3FTPfCjfK8MV7Efon/ndvRqUrNl3y5Elvk6CcgBYHW6h3OmKgx7h5o7idT+axWapHfDTIdB6xD7MaGobfmi20eEs3f/OV26aEg3epYS4WE4tFP+YzMPks6F803nuosa0XQPgc1B+vudMiBzTfyOpNOuQ3K0UkWN6E/HnuEsqvbk4W4y8+SB4NKy6QsoBfHYsTx1DRK1zgH457VwqM98vzvN5yZNrYzZ/y23IA1XAv/GOC2rBupxeOPBdprPPz9XoOrVVtRWdWIh6q+IsE9aZdQmopse+oTmdEx0wbKC57ZlTiRMPy8SA0rXf3ZHfRQ41N7qdjKnxaC6lh/QeNPDgR+tH681j3LkbZ21r1Cqo6kO9CaMfdXRErbWrll9fwpF6pXEbmlkaGPl7kwuVMkeCYJFkMZK7tlJn45b9BWV2d+Bs/x3pvS5D6gFwARK/BRldZr6VGIcTnZ0lhV5EMexgJU2vUia8a5BVVlZQdBRND36EJthhEvh2g2miUefGZZCYCgR6TNRvRqMB7up3hFHuAqGCYoRBXE7iE/UY3NVdy+2Bymzy2igDCXbTUW226bVSVsgFr07U9+dOjHD/jk3y4kGyvMeou4=
